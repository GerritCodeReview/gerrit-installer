{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "20a58631_0fb04ddc",
        "filename": "fpm/scripts/before-install.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-10-31T16:26:29Z",
      "side": 1,
      "message": "Which JVM you checked? We do really know if it would work with Java 99? \n(the 99.* would be matched)",
      "range": {
        "startLine": 31,
        "startChar": 49,
        "endLine": 31,
        "endChar": 57
      },
      "revId": "9c0e5511a9f44b841c27cd4cb856d566bd8e1642",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a81bddf9_51a4e54c",
        "filename": "fpm/scripts/before-install.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-04T11:00:07Z",
      "side": 1,
      "message": "we don\u0027t know if it work with 99, but for sure the current approach doesn\u0027t work with 22:\n```\nPreparing to unpack .../gerrit_3.9.0-0rc3_all.deb ...\nUsing log file /tmp/gerrit-installer.log\nChecking Java version ... \nERROR: Java 17 required by Gerrit\ndpkg: error processing archive /var/cache/apt/archives/gerrit_3.9.0-0rc3_all.deb (--unpack):\n new gerrit package pre-installation script subprocess returned error exit status 3\n\nInitialising Gerrit site ... DONE\nSetting user/group owner ... DONE\nCreating symlinks .......... DONE\n\nInstallation completed\n\nTo start using Gerrit, run \u0027/etc/init.d/gerrit start\u0027 and open: https://host/r/\nErrors were encountered while processing:\n /var/cache/apt/archives/gerrit_3.9.0-0rc3_all.deb\nE: Sub-process /usr/bin/dpkg returned an error code (1)\n                                                                                                                                                                                                                                              \n # java --version                                                                                                                                                                                                                           \nopenjdk 22-ea 2024-03-19\nOpenJDK Runtime Environment (build 22-ea+22-Debian-1)\nOpenJDK 64-Bit Server VM (build 22-ea+22-Debian-1, mixed mode, sharing)\n\n```",
      "parentUuid": "20a58631_0fb04ddc",
      "range": {
        "startLine": 31,
        "startChar": 49,
        "endLine": 31,
        "endChar": 57
      },
      "revId": "9c0e5511a9f44b841c27cd4cb856d566bd8e1642",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a20fb672_3f2a7917",
        "filename": "fpm/scripts/before-install.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-10T19:33:42Z",
      "side": 1,
      "message": "True, but we do not support yet OpenJDK 22 with Gerrit.",
      "parentUuid": "a81bddf9_51a4e54c",
      "range": {
        "startLine": 31,
        "startChar": 49,
        "endLine": 31,
        "endChar": 57
      },
      "revId": "9c0e5511a9f44b841c27cd4cb856d566bd8e1642",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe19e489_8cf5ade9",
        "filename": "fpm/scripts/before-install.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-11-11T06:59:05Z",
      "side": 1,
      "message": "The problematic check that fails with JDK 22 is in line `29` so let me work it out as it is a general purpose one and should work with _all_ (I know strong statement üòä) modern JDK versions.\nAs of line `31` IMHO we should allow everything between `17` and `21` (including) now and once we are confirmed working on newer versions it should be extended. WDYT?",
      "parentUuid": "a20fb672_3f2a7917",
      "range": {
        "startLine": 31,
        "startChar": 49,
        "endLine": 31,
        "endChar": 57
      },
      "revId": "9c0e5511a9f44b841c27cd4cb856d566bd8e1642",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0f76ffb_89ba59a8",
        "filename": "fpm/scripts/before-install.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-11T13:00:15Z",
      "side": 1,
      "message": "\u003e The problematic check that fails with JDK 22 is in line `29` so let me work it out as it is a general purpose one and should work with _all_ (I know strong statement üòä) modern JDK versions.\n\nSure, but bear in mind that fixing the script for all modern JDK versions is quick, fixing Gerrit not so quick üòê\n\n\u003e As of line `31` IMHO we should allow everything between `17` and `21` (including) now and once we are confirmed working on newer versions it should be extended. WDYT?\n\nI don\u0027t believe we can confirm that Gerrit works on Java 21, yet. We must start creating a CI job on stable-3.9 maybe?",
      "parentUuid": "fe19e489_8cf5ade9",
      "range": {
        "startLine": 31,
        "startChar": 49,
        "endLine": 31,
        "endChar": 57
      },
      "revId": "9c0e5511a9f44b841c27cd4cb856d566bd8e1642",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bb9d7c02_04ed679a",
        "filename": "fpm/scripts/before-install.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-11-14T08:43:36Z",
      "side": 1,
      "message": "@dariusz.luksza@gmail.com\n\nI believe that `JDK 22` on debian that your system contains has broken version string as it doesn\u0027t adhere to the other versions on debian e,g,\n```\njava -version\nopenjdk version \"11.0.21\" 2023-10-17\nOpenJDK Runtime Environment (build 11.0.21+9-post-Debian-1)\nOpenJDK 64-Bit Server VM (build 11.0.21+9-post-Debian-1, mixed mode)\n```\n\n```\njava -version\nopenjdk version \"17.0.9\" 2023-10-17\nOpenJDK Runtime Environment (build 17.0.9+9-Debian-2)\nOpenJDK 64-Bit Server VM (build 17.0.9+9-Debian-2, mixed mode, sharing)\n```\n\n```\njava -version\nopenjdk version \"21.0.1\" 2023-10-17\nOpenJDK Runtime Environment (build 21.0.1+12-Debian-2)\nOpenJDK 64-Bit Server VM (build 21.0.1+12-Debian-2, mixed mode, sharing)\n```\n\n```\njava -version\nopenjdk version \"22-ea\" 2024-03-19\nOpenJDK Runtime Environment (build 22-ea+22-Debian-1)\nOpenJDK 64-Bit Server VM (build 22-ea+22-Debian-1, mixed mode, sharing)\n```\n\nAll of them contains _version_ in `\"` whereas yours doesn\u0027t. It seems to be an exception hence I believe that we should skip it.\n\n@luca.milanesio@gmail.com\nas of\n\u003e I don\u0027t believe we can confirm that Gerrit works on Java 21, yet.\n\nThat is correct. OTOH we were never blocking newer versions (so that people could experiment with them and raise issues). Release notes inform what JDK version is supported and IMHO we should stick to that and enforce only the minimum version.",
      "parentUuid": "e0f76ffb_89ba59a8",
      "range": {
        "startLine": 31,
        "startChar": 49,
        "endLine": 31,
        "endChar": 57
      },
      "revId": "9c0e5511a9f44b841c27cd4cb856d566bd8e1642",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8982ec1_729c6941",
        "filename": "fpm/scripts/before-install.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-11-14T09:20:39Z",
      "side": 1,
      "message": "\u003e I believe that JDK 22 on debian that your system contains has broken version string as it doesn\u0027t adhere to the other versions on debian\n\nSure, it looks different, but it also looks like it\u0027s not only specific for Debian. You can also see versions like `22.ea.xx` in `sdk list java` (from sdkman) for Java.net. Don\u0027t know why the 22 uses different versions strings.\n\n\u003e OTOH we were never blocking newer versions (so that people could experiment with them and raise issues).\n\n+1",
      "parentUuid": "bb9d7c02_04ed679a",
      "range": {
        "startLine": 31,
        "startChar": 49,
        "endLine": 31,
        "endChar": 57
      },
      "revId": "9c0e5511a9f44b841c27cd4cb856d566bd8e1642",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a42ae0a4_3ba30044",
        "filename": "fpm/scripts/before-install.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-11-19T08:15:35Z",
      "side": 1,
      "message": "Considering that CI builds `JDK 17` (or newer) compatible war I have restored the previous check and message and this change is purely about improving the JDK version detection. @luca.milanesio@gmail.com WDYT?",
      "parentUuid": "d8982ec1_729c6941",
      "range": {
        "startLine": 31,
        "startChar": 49,
        "endLine": 31,
        "endChar": 57
      },
      "revId": "9c0e5511a9f44b841c27cd4cb856d566bd8e1642",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae060cc7_fc7229a6",
        "filename": "fpm/scripts/before-install.sh",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-11-19T09:53:40Z",
      "side": 1,
      "message": "Have you tried with Java 21? It should fail the check saying that `Java 17 is required by Gerrit`.\n\nI haven\u0027t tried myself but based on L31 it passes the test, which is incorrect IMHO.",
      "parentUuid": "a42ae0a4_3ba30044",
      "range": {
        "startLine": 31,
        "startChar": 49,
        "endLine": 31,
        "endChar": 57
      },
      "revId": "9c0e5511a9f44b841c27cd4cb856d566bd8e1642",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}