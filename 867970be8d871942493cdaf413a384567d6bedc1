{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c38c4f27_3bd54fef",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1157810
      },
      "writtenOn": "2023-10-24T08:48:46Z",
      "side": 1,
      "message": "typo: headless",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c5f33b37_de39dd88",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-10-21T11:26:40Z",
      "side": 1,
      "message": "I\u0027ve build and installed DEB package locally and it worked as expected.\n\nThe Java dependencies were taken from gradle DEB file.",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a7264022_9fb1b0d1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-10-21T11:29:16Z",
      "side": 1,
      "message": "Have you also checked on Ubuntu?",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d4727f15_be3bed0a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-10-21T11:33:50Z",
      "side": 1,
      "message": "nope, only on Debian 12.2",
      "parentUuid": "a7264022_9fb1b0d1",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "492d403d_bfc97ac8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-10-21T11:39:27Z",
      "side": 1,
      "message": "Ubuntu [Lunar and Mantinc](https://packages.ubuntu.com/search?keywords\u003ddefault-jre-headless\u0026searchon\u003dnames\u0026suite\u003dall\u0026section\u003dall) do provide `default-jre-headless` package in version `2:1.17`, so it _should_ work.",
      "parentUuid": "d4727f15_be3bed0a",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b2a943eb_7078118e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-10-21T11:56:44Z",
      "side": 1,
      "message": "We should decide on one fix not two of them. Either this or I937a7a4e8560b should be continued",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "106a3530_6f23dfd7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-10-21T12:00:35Z",
      "side": 1,
      "message": "I\u0027d prefer that the package installs all of its required dependencies automatically and not fail during the installation process.\n\nThat\u0027s why dependencies exist in the first place!\n\nDon\u0027t mind having this check in two places, especially since the RPM dependencies are not changed and still installing Gerrit will not drag in JRE.",
      "parentUuid": "b2a943eb_7078118e",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b150be5_f46f4840",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-10-21T12:06:49Z",
      "side": 1,
      "message": "btw. we already declare package dependency on `git` and `su`. Don\u0027t know how why the JRE was missed.",
      "parentUuid": "106a3530_6f23dfd7",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6c83a264_795401b9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2023-10-23T07:07:43Z",
      "side": 1,
      "message": "Have you tried running it on `eclipse-temurine` image?",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87c5c282_2764f8de",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-10-24T13:17:35Z",
      "side": 1,
      "message": "the temurin is a tricky beast. From what I\u0027ve seen it doesn\u0027t install Java as a DEB package, it just comes with it bundled it. This means that having JRE as a deb dependency will prevent it from installing :/",
      "parentUuid": "6c83a264_795401b9",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "01780e52_dc2bf9a7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-10-24T20:19:43Z",
      "side": 1,
      "message": "I am against this move, because of the following reasons:\n- We never enforced a specific JVM package as dependency\n- The JVM could have been already installed in other ways and available: why forcing to be a package at all?\n\nIf the Gerrit admin has basic OS skills, he should be able to install a JVM.\nIf the Gerrit admin does not have basic OS skills, then it is way better for him to use Docker instead.\n\nFeel free to disagree and explain your benefits with this change.\n\nP.S. Our Deb packages aren\u0027t just for Debian, but for any distribution that accept a .deb package for installation.",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d1f1c7a7_8dba6c44",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1010134
      },
      "writtenOn": "2023-10-26T12:56:06Z",
      "side": 1,
      "message": "\u003e I am against this move, because of the following reasons:\n\u003e - We never enforced a specific JVM package as dependency\n\nIf something wasn\u0027t enforced in the past it doesn\u0027t mean that it can\u0027t be in the future. Arguments like this will block any future improvements.\n\n\u003e - The JVM could have been already installed in other ways and available: why forcing to be a package at all?\n\nThe point of packaging systems and dependencies is to give a working environment. All packages that I know of after installing will give you a working system, with a sensible default configuration and up to the point that they will start a daemon if required.\n\nThe packaging system is an improvement over _configure \u0026 make_ scripts that would fail and complain about missing a library or other dependencies, forcing you to manually provide those dependencies one after another.\n\n\u003e If the Gerrit admin has basic OS skills, he should be able to install a JVM.\n\nWith the same approach, the admin should also be able to install `git` and `sudo`, but those two are already included as dependencies. This already creates inconsistency.\n\n\u003e If the Gerrit admin does not have basic OS skills, then it is way better for him to use Docker instead.\n\u003e \n\u003e Feel free to disagree and explain your benefits with this change.\n\nAs a linux user, I expect the program to be fully operational after installing its package. Also when upgrading I expect the dependency system to tell me that I need to upgrade other packages upfront and not leave my system in a broken state.\n\nThis is what actually happened on my private Gerrit instance. After upgrading to 3.9-rc0 (using the official apt source) the Gerrit was not starting. The only error I\u0027ve seen was that the init script has failed. After some digging in I\u0027ve discovered that the class file versions are not supported (I doubt that most OS admins will know what that even means). This way I learned that I need up upgrade my JVM.\n\nImagine a system that runs multiple services that use JVM eg. Gerrit, Jenkins and Nexus. Installing a new version of Gerrit from DEB package will hide the fact that it also needs a new JVM version. When you learn that after the fact, you either must upgrade all other servers or downgrade the Gerrit version.\n\nThe purpose of the dependency system is to inform admins what\u0027s actually required, prevent colliding versions and prevent breaking the system. This is not the case now for the Gerrit DEB package.\n\n\u003e P.S. Our Deb packages aren\u0027t just for Debian, but for any distribution that accept a .deb package for installation.\n\nIt will work with different systems, it may require a system version upgrade, but this is how things work with versioned systems, that you sometimes need to upgrade the whole system in order to use a newer version of a package.",
      "parentUuid": "01780e52_dc2bf9a7",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "46f22acf_19188a41",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-10-27T21:47:37Z",
      "side": 1,
      "message": "\u003e \u003e I am against this move, because of the following reasons:\n\u003e \u003e - We never enforced a specific JVM package as dependency\n\u003e \n\u003e If something wasn\u0027t enforced in the past it doesn\u0027t mean that it can\u0027t be in the future. Arguments like this will block any future improvements.\n\nSure, but that means a breaking change in the packaging.\nWe should then start a packaging with a different name/variance, so that people are then expecting something different.\n\n\u003e \u003e - The JVM could have been already installed in other ways and available: why forcing to be a package at all?\n\u003e \n\u003e The point of packaging systems and dependencies is to give a working environment. All packages that I know of after installing will give you a working system, with a sensible default configuration and up to the point that they will start a daemon if required.\n\nI know, but the JVM is a different beast IMHO. Commercial customers have the JVM provided by their vendor (e.g. Oracle or other) which would provide a specific packaging, different than the open-source one.\n\nLast but not least, there are also customers with custom-JVMs (e.g. SAP, and many others).\n\n\u003e The packaging system is an improvement over _configure \u0026 make_ scripts that would fail and complain about missing a library or other dependencies, forcing you to manually provide those dependencies one after another.\n\nSure, we can explicitly target a Debian version and develop a brand-new packaging for it, explicitly mentioning the open-source version of the JVM package.\nI believe there were discussions also of including Gerrit as standard package in Debian in the past, do you remember?\n\n\u003e \u003e If the Gerrit admin has basic OS skills, he should be able to install a JVM.\n\u003e \n\u003e With the same approach, the admin should also be able to install `git` and `sudo`, but those two are already included as dependencies. This already creates inconsistency.\n\nSure, but \u0027git\u0027 and \u0027sudo\u0027 have one single provider, whilst the JVM can have multiple implementations and providers.\n\n\u003e \u003e If the Gerrit admin does not have basic OS skills, then it is way better for him to use Docker instead.\n\u003e \u003e \n\u003e \u003e Feel free to disagree and explain your benefits with this change.\n\u003e \n\u003e As a linux user, I expect the program to be fully operational after installing its package. Also when upgrading I expect the dependency system to tell me that I need to upgrade other packages upfront and not leave my system in a broken state.\n\nSure, that makes sense as well.\n\n\u003e This is what actually happened on my private Gerrit instance. After upgrading to 3.9-rc0 (using the official apt source) the Gerrit was not starting. The only error I\u0027ve seen was that the init script has failed. After some digging in I\u0027ve discovered that the class file versions are not supported (I doubt that most OS admins will know what that even means). This way I learned that I need up upgrade my JVM.\n\nYes, that was a disappointing experience that we can and must improve.\n\n\u003e Imagine a system that runs multiple services that use JVM eg. Gerrit, Jenkins and Nexus. Installing a new version of Gerrit from DEB package will hide the fact that it also needs a new JVM version. When you learn that after the fact, you either must upgrade all other servers or downgrade the Gerrit version.\n\nThat\u0027s an interesting point: we may also think about a \"Gerrit bundle\" that includes a self-contained JVM. There are customers with issues in upgrading because of the constraints o the JVM with other products on the same box.\n\n\u003e The purpose of the dependency system is to inform admins what\u0027s actually required, prevent colliding versions and prevent breaking the system. This is not the case now for the Gerrit DEB package.\n\nI know, that was a deliberate decision taken many years ago, because of the need of allowing the use of this package in a non-standard setup.\n\n\u003e \u003e P.S. Our Deb packages aren\u0027t just for Debian, but for any distribution that accept a .deb package for installation.\n\u003e \n\u003e It will work with different systems, it may require a system version upgrade, but this is how things work with versioned systems, that you sometimes need to upgrade the whole system in order to use a newer version of a package.\n\nI know, but Gerrit has already so many impediments for upgrading, I would avoid adding others.",
      "parentUuid": "d1f1c7a7_8dba6c44",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8d5fcdf9_379213ff",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2023-10-27T21:47:37Z",
      "side": 1,
      "message": "That means we need to park this solution for now :-(",
      "parentUuid": "87c5c282_2764f8de",
      "revId": "867970be8d871942493cdaf413a384567d6bedc1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "At least one maximum vote for label \u0027Code-Review\u0027 is required"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader AND -label:Code-Review=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Code-Review=MAX,user=non_uploader","label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "867970be8d871942493cdaf413a384567d6bedc1",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Do-Not-Submit",
        "description": {
          "value": "Changes that have DO NOT SUBMIT in their commit message are not submittable."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:false"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["message:\"^.*(D|d)(O|o) (N|n)(O|o)(T|t) (S|s)(U|u)(B|b)(M|m)(I|i)(T|t).*\""]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:false"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "867970be8d871942493cdaf413a384567d6bedc1",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "No-Unresolved-Comments",
        "description": {
          "value": "Changes that have unresolved comments are not submittable. Unless overriden by adding the hashtag allow-unresolved-comments."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "has:unresolved"
          }
        },
        "submittabilityExpression": {
          "expressionString": "-has:unresolved"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "hashtag:allow-unresolved-comments"
          }
        },
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"has:unresolved"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["has:unresolved"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"-has:unresolved"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":["has:unresolved"],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"hashtag:allow-unresolved-comments"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["hashtag:allow-unresolved-comments"]}
      },
      "patchSetCommitId": "867970be8d871942493cdaf413a384567d6bedc1",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforced_gerrit"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforcement-satisfied_gerrit"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "867970be8d871942493cdaf413a384567d6bedc1",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "CI result status for build and tests is passing"
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "-branch:refs/meta/config"
          }
        },
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"-branch:refs/meta/config"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["branch:refs/meta/config"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "867970be8d871942493cdaf413a384567d6bedc1",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}